<!DOCTYPE html>
<html lang="pt">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Admin</title>
	<link rel="stylesheet" href="../css/screencall.css">
	<link rel="stylesheet" href="../css/bootstrap.min.css">

	<style>
  #chartContainer,
  #chartContainer1,
  #chartContainer2,
  #chartContainer3
 {
  margin-top: 4rem;
  margin-left: 1rem;
  margin-right: 1rem;
  float: left;
  width: 33.33%;
  padding: 10px;
  box-sizing: border-box;
}
#section_month_today, 
#section_progress_pizza {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2;
}
		body{
			overflow-x: hidden;
			background: #d6d6d6;
		}

		main{
			justify-content: center;
		}
		.fs-1 {
			font-size: 2.5rem !important;
			text-align: center;
		}

		.card {
			height: 200px;
			width: 600px;
		}

		.div2 {
			width: 400px;
			border: 0px;
		}

		.btn {
			display: inline-block;
			font-weight: 400;
			line-height: 1.5;
			color: #212529;
			text-align: center;
			text-decoration: none;
			vertical-align: middle;
			cursor: pointer;
			-webkit-user-select: none;
			-moz-user-select: none;
			user-select: none;
			background-color: transparent;
			border: 1px solid transparent;
			padding: 0.375rem 0.75rem;
			font-size: 1rem;
			border-radius: 0.25rem;
			transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
		}

		.btn-primary {
			color: #fff;
			background-color: #97c11f;
			border-color: #97c11f;
		}

		.btn-primary:hover{
			background: #fff;
			color: #97c11f;
		}

		.btn{
			padding: 0.5rem 1rem;
			font-size: 1.25rem;
			border-radius: 0.3rem;
		}

		.svg-inline--fa {
    display: inline-block;
    font-size: inherit;
    height: 1em;
    overflow: visible;
    vertical-align: -0.125em;
}

.svg-inline--fa.fa-w-16 {
    width: 1em;
}

.btn-secondary {
    color: #fff;
    background-color: #6c757d;
    border-color: #6c757d;
}

.btn-secondary:hover{
			background: #fff;
			color: #6c757d;
		}

		a{
			text-decoration: none;
			color: #97c11f;
		}

		.btn-danger {
    color: #fff;
    background-color: #c82333;
    border-color: #bd2130;
}

.box li {
    padding: 24px;
    background: #F9F9F9;
    border-radius: 20px;
    display: flex;
    align-items: center;
    grid-gap: 24px;
		text-align: left;
}

.box li:nth-child(1) .bx {
    background: #A2FA66;
    color: #3C91E6;
}

.box li .bx {
    width: 80px;
    height: 80px;
    border-radius: 10px;
    font-size: 36px;
		padding: 1.1875rem;
    display: flex;
    justify-content: center;
    align-items: center;
}


article {
	 padding: 50px;
}
 .grafico {
	 height: 200px;
	 margin: 1rem auto;
	 position: relative;
	 width: 200px;
	 background-color: #97c11f;
	 border-radius: 50%;
}
 .grafico #hueco {
	 height: 150px;
	 width: 150px;
	 border-radius: 50%;
	 background-color: #d6d6d6;
	 position: absolute;
	 top: 50%;
	 left: 50%;
	 margin: -75px 0 0 -75px;
	 z-index: 100;
}
 .grafico #hueco div {
	 text-align: center;
	 text-transform: uppercase;
}
 .grafico #hueco div.mes {
	 font-size: 20px;
	 margin-top: 20px;
}
 .grafico #hueco div.anio {
	 opacity: 0.5;
	 font-size: 26px;
}
 .grafico .recorte {
	 border-radius: 50%;
	 position: absolute;
	 height: 100%;
	 width: 100%;
}
 .grafico .recorte .quesito {
	 border-radius: 50%;
	 clip: rect(0px,200px,100px,100px);
	 position: absolute;
	 height: 100%;
	 width: 100%;
	 background-color: #97c11f;
	 transform: rotate(0deg);
}
 .grafico #porcion1 {
	 z-index: 3;
}
 .grafico #porcion2 {
	 z-index: 2;
	 background-color: transparent;
	 transform: rotate(-55deg);
}
 .grafico #porcion2 .quesito {
	 background-color: #97c11f;
	 clip: rect(0px,200px,100px,100px);
}
 .grafico #porcion3 {
	 z-index: 1;
}
 .grafico #porcion3 .quesito {
	 clip: rect(0px,100px,200px,0px);
	 background-color: #97c11f;
	 transform: rotate(-150deg);
}
	</style>

</head>

<body>
	<%- include('includes/header'); %>

	<main style="margin-top: 80px;">
		<div class="container text-center" style="padding-top: 10px;" >

			<div class="box">
				<div class="row">
					<div class="col-md-4 mt-3">
						<li>
							<img class="bx" src="../img/user_groups_40px.png" alt="">
							<span class="text">
								<h3><%- users %></h3>
								<p>Funcionários</p>
							</span>
						</li>
					</div>
					<div class="col-md-4 mt-3">
						<li>
							<img class="bx" src="../img/service_tips_64px.png" alt="">
							<span class="text">
								<h3><%- services %> </h3>
								<p>Serviços</p>
							</span>
						</li>
					</div>
					<div class="col-md-4 mt-3">
						<li>
							<img class="bx" src="../img/balcao.png" alt="">
							<span class="text">
								<h3><%- counters %></h3>
								<p>Balcões</p>
							</span>
						</li>
					</div>
				</div>
			</div>
			
		</div>
	</main>
	<div id="section_month_today">
		<div id="chartContainer" style="height: 300px; width: 40%;"></div>
		<div id="chartContainer1" style="height: 300px; width: 40%;"></div>
	</div>
	<div id="section_progress_pizza" style="margin-bottom: 3rem;">
		
		<div id="chartContainer2" style="height: 300px; width: 40%;"></div>
	</div>

	
</body>
<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/chart.js"></script>
<script>
	window.onload = function () {
		var ticketDay = <%- ticketsPorDia %>
	// Dados dos tickets por dia
	var ticketsPorDia = ticketDay.map(item => {
		return { x: new Date(item.x), y: item.y }
	});

	var ticketsMonth = <%- ticketsMonth %>


	// Dados dos tickets por mês
	var ticketsPorMes = ticketsMonth.map(item => {
		return 	{ x: new Date(item.month.split('-')[0], item.month.split('-')[1] - 1), y: item.count }
	});
	
	// Criando o gráfico de colunas por dia
	var chartPorDia = new CanvasJS.Chart("chartContainer", {
		animationEnabled: true,
		title: {
			text: "Quantidade de Tickets por Dia"
		},
		axisX: {
			valueFormatString: "DD/MM/YYYY"
		},
		axisY: {
			title: "Quantidade de Tickets"
		},
		data: [{
			type: "column",
			dataPoints: ticketsPorDia
		}]
	});
	
	// Renderizando o gráfico de colunas por dia
	chartPorDia.render();
	
	// Criando o gráfico de colunas por mês
	var chartPorMes = new CanvasJS.Chart("chartContainer1", {
		animationEnabled: true,
		title: {
			text: "Quantidade de Tickets por Mês"
		},
		axisX: {
			interval: 1,
			intervalType: "month",
			valueFormatString: "MMM"
		},
		axisY: {
			title: "Quantidade de Tickets"
		},
		data: [{
			type: "column",
			dataPoints: ticketsPorMes
		}]
	});
	
	// Renderizando o gráfico de colunas por mês
	chartPorMes.render();
	

	var ticketsPorDepartamento = <%- ticketsPorDepartamento %>
	
	// Criando o gráfico de pizza
	var chartPorDepartamento = new CanvasJS.Chart("chartContainer2", {
		animationEnabled: true,
		legend: {
    fontSize: 20 // define o tamanho da fonte da legenda para 20 pixels
  },
		title: {
			text: "Distribuição de Tickets por Departamento"
		},
		data: [{
			type: "pie",
			startAngle: 25,
			toolTipContent: "<b>{label}</b>: {y}%",
			showInLegend: "true",
			legendText: "{label} : {x}",
			indexLabelFontSize: 16,
			indexLabel: "{label} - {y}%",
			dataPoints: ticketsPorDepartamento
		}]
	});
	
	// Renderizando o gráfico de pizza
	chartPorDepartamento.render();
	
	
	// Dados dos tickets por serviço
	// var ticketsPorServico = [
	// 	{ x: new Date(2023, 3, 1), y1: 10, y2: 20, y3: 15, y4: 5 },
	// 	{ x: new Date(2023, 3, 2), y1: 12, y2: 18, y3: 18, y4: 3 },
	// 	{ x: new Date(2023, 3, 3), y1: 15, y2: 15, y3: 20, y4: 2 },
	// 	{ x: new Date(2023, 3, 4), y1: 18, y2: 12, y3: 22, y4: 1 },
	// 	{ x: new Date(2023, 3, 5), y1: 20, y2: 10, y3: 25, y4: 0 },
	// 	{ x: new Date(2023, 3, 6), y1: 22, y2: 8, y3: 28, y4: 0 },
	// 	{ x: new Date(2023, 3, 7), y1: 25, y2: 5, y3: 30, y4: 0 },
	// 	// ... adicione aqui os dados para os outros dias
	// ];
	
	// // Criando o gráfico de área
	// var chartPorServico = new CanvasJS.Chart("chartContainer3", {
	// 	animationEnabled: true,
	// 	title:{
	// 		text: "Quantidade de Tickets por Serviço"
	// 	},
	// 	axisX: {
	// 		valueFormatString: "DD/MM/YYYY"
	// 	},
	// 	axisY: {
	// 		title: "Quantidade de Tickets",
	// 		minimum: 0
	// 	},
	// 	toolTip: {
	// 		shared: true
	// 	},
	// 	legend: {
	// 		verticalAlign: "top",
	// 		horizontalAlign: "center",
	// 		dockInsidePlotArea: true
	// 	},
	// 	data: [{
	// 		type:"stackedArea",
	// 		showInLegend: true,
	// 		name: "Atendimento Geral",
	// 		dataPoints: ticketsPorServico.map(function(item){
	// 			return { x: item.x, y: item.y1 };
	// 		})
	// 	},
	// 	{
	// 		type:"stackedArea",
	// 		showInLegend: true,
	// 		name: "Banco de Urgência",
	// 		dataPoints: ticketsPorServico.map(function(item){
	// 			return { x: item.x, y: item.y2 };
	// 		})
	// 	},
	// 	{
	// 		type:"stackedArea",
	// 		showInLegend: true,
	// 		name: "Triagem",
	// 		dataPoints: ticketsPorServico.map(function(item){
	// 			return { x: item.x, y: item.y3 };
	// 		})
	// 	},
	// 	{
	// 		type:"stackedArea",
	// 		showInLegend: true,
	// 		name: "Pré-consulta",
	// 		dataPoints: ticketsPorServico.map(function(item){
	// 			return { x: item.x, y: item.y4 };
	// 		})
	// 	}]
	// });
	
	// Renderizando o gráfico de área
	chartPorServico.render();
	
	document.querySelector('a').remove();
	
	}
	</script>
<script src="../js/canvasjs.min.js"></script>

</html>